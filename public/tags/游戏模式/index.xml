<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>游戏模式 on 古月月仔的博客</title>
    <link>http://localhost:1313/tags/%E6%B8%B8%E6%88%8F%E6%A8%A1%E5%BC%8F/</link>
    <description>Recent content in 游戏模式 on 古月月仔的博客</description>
    <generator>Hugo</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sun, 21 Apr 2024 00:00:00 +0800</lastBuildDate>
    <atom:link href="http://localhost:1313/tags/%E6%B8%B8%E6%88%8F%E6%A8%A1%E5%BC%8F/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>【虚幻引擎】GameMode和GameSate</title>
      <link>http://localhost:1313/posts/%E8%99%9A%E5%B9%BB%E5%BC%95%E6%93%8Egamemode%E5%92%8Cgamesate/</link>
      <pubDate>Sun, 21 Apr 2024 00:00:00 +0800</pubDate>
      <guid>http://localhost:1313/posts/%E8%99%9A%E5%B9%BB%E5%BC%95%E6%93%8Egamemode%E5%92%8Cgamesate/</guid>
      <description>&lt;p&gt;GameMode是服务器端权威的游戏规则管理者，定义核心逻辑；GameState则负责在服务器与客户端间同步全局游戏状态，如比分和时间。&lt;/p&gt;&#xA;&lt;p&gt;&lt;figure style=&#34;text-align: center; margin: 1.5rem auto;&#34;&gt;&#xA;  &#xA;  &lt;img src=&#34;http://localhost:1313/posts/%E8%99%9A%E5%B9%BB%E5%BC%95%E6%93%8Egamemode%E5%92%8Cgamesate/image-20250422211945454.png&#34; &#xA;       alt=&#34;image-20250422211945454&#34; &#xA;       &#xA;       class=&#34;zoomable&#34; &#xA;       style=&#34;max-width: 100%; height: auto; border-radius: 8px; cursor: zoom-in;&#34;&#xA;       loading=&#34;lazy&#34; /&gt;&#xA;  &#xA;    &lt;figcaption style=&#34;margin-top: 8px; font-size: 0.85em; color: #888; font-style: italic;&#34;&gt;&#xA;      image-20250422211945454&#xA;    &lt;/figcaption&gt;&#xA;  &#xA;&lt;/figure&gt;&lt;/p&gt;&#xA;&lt;p&gt;在虚幻引擎（Unreal Engine）中，&lt;strong&gt;GameMode&lt;/strong&gt; 和 &lt;strong&gt;GameState&lt;/strong&gt; 都是多人游戏中的核心类，但它们的分工和用途有显著区别。以下是它们的对比和典型应用场景：&lt;/p&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;1-gamemode游戏规则管理者&#34;&gt;&lt;strong&gt;1. GameMode（游戏规则管理者）&lt;/strong&gt;&lt;/h3&gt;&#xA;&lt;h4 id=&#34;职责&#34;&gt;&lt;strong&gt;职责&lt;/strong&gt;&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;仅存在于服务器端&lt;/strong&gt;（不会复制到客户端）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;定义游戏的核心规则&lt;/strong&gt;：胜利条件、玩家生成逻辑、回合制规则等。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;管理玩家登录/退出&lt;/strong&gt;（通过&lt;code&gt;Login&lt;/code&gt;/&lt;code&gt;Logout&lt;/code&gt;等事件）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;生成并持有PlayerController、PlayerState等&lt;/strong&gt;。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;典型用途&#34;&gt;&lt;strong&gt;典型用途&lt;/strong&gt;&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;&#xA;&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1&#xA;&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2&#xA;&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3&#xA;&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4&#xA;&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5&#xA;&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6&#xA;&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7&#xA;&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8&#xA;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&#xA;&lt;td class=&#34;lntd&#34;&gt;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 示例：在GameMode中设置玩家生成逻辑&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AMyGameMode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PostLogin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;APlayerController&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;NewPlayer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;Super&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;PostLogin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NewPlayer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 生成玩家角色&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NewPlayer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;GetPawn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;nullptr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;SpawnPlayerAtTransform&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;NewPlayer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;SpawnTransform&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&#xA;&lt;/div&gt;&#xA;&lt;/div&gt;&lt;h4 id=&#34;关键特性&#34;&gt;&lt;strong&gt;关键特性&lt;/strong&gt;&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;服务器权威&lt;/strong&gt;：客户端无法修改GameMode的逻辑。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;不复制&lt;/strong&gt;：客户端无法直接访问GameMode。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;2-gamestate游戏状态同步者&#34;&gt;&lt;strong&gt;2. GameState（游戏状态同步者）&lt;/strong&gt;&lt;/h3&gt;&#xA;&lt;h4 id=&#34;职责-1&#34;&gt;&lt;strong&gt;职责&lt;/strong&gt;&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;存在于服务器和客户端&lt;/strong&gt;（自动复制到所有客户端）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;存储并同步游戏全局状态&lt;/strong&gt;：比分、剩余时间、玩家列表等。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;提供客户端可见的数据&lt;/strong&gt;（如通过&lt;code&gt;PlayerArray&lt;/code&gt;访问所有玩家的&lt;code&gt;PlayerState&lt;/code&gt;）。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h4 id=&#34;典型用途-1&#34;&gt;&lt;strong&gt;典型用途&lt;/strong&gt;&lt;/h4&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;&#xA;&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1&#xA;&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2&#xA;&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3&#xA;&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4&#xA;&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5&#xA;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&#xA;&lt;td class=&#34;lntd&#34;&gt;&#xA;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-cpp&#34; data-lang=&#34;cpp&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// 示例：在GameState中同步比分&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AMyGameState&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;::&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OnRep_TeamScores&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// 客户端更新UI显示比分&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;UpdateScoreboardUI&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;TeamAScore&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;TeamBScore&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&#xA;&lt;/div&gt;&#xA;&lt;/div&gt;&lt;h4 id=&#34;关键特性-1&#34;&gt;&lt;strong&gt;关键特性&lt;/strong&gt;&lt;/h4&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;数据同步&lt;/strong&gt;：通过属性复制（&lt;code&gt;Replicated&lt;/code&gt;）或RPC同步到客户端。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;客户端可读&lt;/strong&gt;：UI可以直接绑定GameState的数据（如剩余时间）。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;核心区别对比&#34;&gt;&lt;strong&gt;核心区别对比&lt;/strong&gt;&lt;/h3&gt;&#xA;&lt;table&gt;&#xA;  &lt;thead&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;th&gt;&lt;strong&gt;特性&lt;/strong&gt;&lt;/th&gt;&#xA;          &lt;th&gt;&lt;strong&gt;GameMode&lt;/strong&gt;&lt;/th&gt;&#xA;          &lt;th&gt;&lt;strong&gt;GameState&lt;/strong&gt;&lt;/th&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;存在位置&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;仅服务器&lt;/td&gt;&#xA;          &lt;td&gt;服务器 + 客户端（复制）&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;用途&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;定义规则、逻辑控制&lt;/td&gt;&#xA;          &lt;td&gt;存储和同步全局状态&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;是否复制到客户端&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;❌ 否&lt;/td&gt;&#xA;          &lt;td&gt;✅ 是&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;客户端访问权限&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;无法直接访问&lt;/td&gt;&#xA;          &lt;td&gt;可读取数据（如显示比分）&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;      &lt;tr&gt;&#xA;          &lt;td&gt;&lt;strong&gt;生命周期&lt;/strong&gt;&lt;/td&gt;&#xA;          &lt;td&gt;游戏开始时创建，结束时销毁&lt;/td&gt;&#xA;          &lt;td&gt;随游戏运行持续存在&lt;/td&gt;&#xA;      &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;协作流程示例&#34;&gt;&lt;strong&gt;协作流程示例&lt;/strong&gt;&lt;/h3&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;&lt;strong&gt;服务器&lt;/strong&gt;：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;GameMode决定玩家生成规则（如出生点选择）。&lt;/li&gt;&#xA;&lt;li&gt;GameState更新并同步比分到所有客户端。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;客户端&lt;/strong&gt;：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;通过GameState获取实时比分，更新UI。&lt;/li&gt;&#xA;&lt;li&gt;无法修改规则（必须通过服务器GameMode）。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;hr&gt;&#xA;&lt;h3 id=&#34;何时使用&#34;&gt;&lt;strong&gt;何时使用？&lt;/strong&gt;&lt;/h3&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;用GameMode&lt;/strong&gt;：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;需要权威控制游戏逻辑（如判断胜利条件）。&lt;/li&gt;&#xA;&lt;li&gt;处理玩家登录/退出等敏感操作。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;用GameState&lt;/strong&gt;：&#xA;&lt;ul&gt;&#xA;&lt;li&gt;需要让所有客户端知道全局状态（如倒计时、玩家列表）。&lt;/li&gt;&#xA;&lt;li&gt;UI需要绑定的动态数据（如实时比分）。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;通过这种分工，虚幻引擎实现了&lt;strong&gt;逻辑与状态的分离&lt;/strong&gt;，确保多人游戏的同步性和安全性。&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
