<!DOCTYPE html>
<html lang="zh-cn"
  x-data
  :class="$store.darkMode.class()"
  :data-theme="$store.darkMode.theme()">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã€ComfyUIã€‘æ‰¹é‡ç”Ÿæˆè‡ªåŠ¨åŒ– | å¤æœˆæœˆä»”çš„åšå®¢</title>

    

<link rel="canonical" href="http://localhost:1313/posts/comfyuii2i%E6%89%B9%E9%87%8F%E7%94%9F%E6%88%90%E8%87%AA%E5%8A%A8%E5%8C%96/" />


<meta name="author" content="å¤æœˆæœˆä»”" />
<meta name="description" content="ä¸ºè§£å†³YOLOé¡¹ç›®æ•°æ®ä¸è¶³é—®é¢˜ï¼Œä½œè€…é€šè¿‡ComfyUIå¯¼å‡ºå·¥ä½œæµAPIå¹¶ç¼–å†™Pythonè„šæœ¬ï¼Œå®ç°äº†æœ¬åœ°æ‰¹é‡å›¾ç‰‡çš„è‡ªåŠ¨åŒ–å¢å¼ºï¼Œé«˜æ•ˆç”Ÿæˆäº†ä¸€ä¸€å¯¹åº”çš„è®­ç»ƒå›¾åƒæ•°æ®ã€‚" />
<meta name="keywords" content="Diffusion,AIGC,AIç»˜ç”»,Python,ComfyUI,AP">


<meta name="generator" content="Hugo 0.153.1">

<meta property="og:url" content="http://localhost:1313/posts/comfyuii2i%E6%89%B9%E9%87%8F%E7%94%9F%E6%88%90%E8%87%AA%E5%8A%A8%E5%8C%96/">
  <meta property="og:site_name" content="å¤æœˆæœˆä»”çš„åšå®¢">
  <meta property="og:title" content="ã€ComfyUIã€‘æ‰¹é‡ç”Ÿæˆè‡ªåŠ¨åŒ–">
  <meta property="og:description" content="ä¸ºè§£å†³YOLOé¡¹ç›®æ•°æ®ä¸è¶³é—®é¢˜ï¼Œä½œè€…é€šè¿‡ComfyUIå¯¼å‡ºå·¥ä½œæµAPIå¹¶ç¼–å†™Pythonè„šæœ¬ï¼Œå®ç°äº†æœ¬åœ°æ‰¹é‡å›¾ç‰‡çš„è‡ªåŠ¨åŒ–å¢å¼ºï¼Œé«˜æ•ˆç”Ÿæˆäº†ä¸€ä¸€å¯¹åº”çš„è®­ç»ƒå›¾åƒæ•°æ®ã€‚">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-12-01T00:00:00+08:00">
    <meta property="article:modified_time" content="2025-12-01T00:00:00+08:00">
    <meta property="article:tag" content="Diffusion">
    <meta property="article:tag" content="AIGC">
    <meta property="article:tag" content="AIç»˜ç”»">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="ComfyUI">
    <meta property="article:tag" content="AP">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="ã€ComfyUIã€‘æ‰¹é‡ç”Ÿæˆè‡ªåŠ¨åŒ–">
  <meta name="twitter:description" content="ä¸ºè§£å†³YOLOé¡¹ç›®æ•°æ®ä¸è¶³é—®é¢˜ï¼Œä½œè€…é€šè¿‡ComfyUIå¯¼å‡ºå·¥ä½œæµAPIå¹¶ç¼–å†™Pythonè„šæœ¬ï¼Œå®ç°äº†æœ¬åœ°æ‰¹é‡å›¾ç‰‡çš„è‡ªåŠ¨åŒ–å¢å¼ºï¼Œé«˜æ•ˆç”Ÿæˆäº†ä¸€ä¸€å¯¹åº”çš„è®­ç»ƒå›¾åƒæ•°æ®ã€‚">




<link rel="stylesheet" href="/css/output.css" />



<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js"></script>

    


<style>
  pre {
    padding: 1em;
    overflow: auto;
  }
</style>









    

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js" integrity="sha256-4EHxtjnR5rL8JzbY12OKQJr81ESm7JBEb49ORPo29AY=" crossorigin="anonymous"></script>
  </head>
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js"></script>

<style>
   
  .medium-zoom-overlay {
    z-index: 100;
    background: rgba(0, 0, 0, 0.8) !important;
  }
  .medium-zoom-image--opened {
    z-index: 101;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    
    const zoom = mediumZoom('.zoomable', {
      margin: 24,          
      background: '#000',  
      scrollOffset: 40,    
    });
  });
</script>
  <body x-data="{
    flip: false,
  }">
    
    <div id="dream-global-bg"></div>

    
<nav class="mt-4 lg:mt-8 py-4">

  
  <div class="container flex justify-between px-4">
  
    <section class="flex items-center gap-4">
      <div class="avatar cursor-pointer hover:avatar-online" @click="flip = !flip" title="Flip it!">
        <div class="h-10 rounded-full">
          <img src="/img/ChipDog.jpg" alt="å¤æœˆæœˆä»”çš„åšå®¢" />
        </div>
      </div>

      
      <div>
        
        <a href="http://localhost:1313/" class="text-lg font-semibold cursor-pointer">
          å¤æœˆæœˆä»”çš„åšå®¢
        </a>
        
        
        <div class="text-base-content/60 text-sm">è®¡ç®—æœºåœ¨æ ¡ç”Ÿ || æ¸¸æˆç¨‹åºå‘˜
è®°å½•ä»åŸºç¡€åˆ°è¿›é˜¶çš„æ¯ä¸€ä»½æ€è€ƒã€‚</div>
        
      </div>
      
    </section>

    
    

    <div class="dropdown dropdown-end sm:hidden">
      <div tabindex="0" role="button" class="btn btn-ghost btn-square" aria-label="Select an option">
        <ion-icon name="menu" class="text-2xl"></ion-icon>
      </div>
      <ul tabindex="0" class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-md">
        







<li>
  <div role="link" tabindex="0" class="inline-flex items-center p-2 cursor-pointer" @click="flip = !flip" title="About">
    <ion-icon name="information-circle"></ion-icon>About</div>
</li>





















<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/posts" title="Archives">
    <ion-icon name="archive"></ion-icon>
    Archives
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/categories" title="All Categories">
    <ion-icon name="grid"></ion-icon>
    All Categories
  </a>
</li>




<li>
  <a class="inline-flex items-center p-2 cursor-pointer" href="/tags" title="All Tags">
    <ion-icon name="pricetags"></ion-icon>
    All Tags
  </a>
</li>






      </ul>
    </div>
    <section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4">
      

      
      




<div role="link" tabindex="0" class="text-sm font-semibold cursor-pointer hover:underline" @click="flip = !flip" title="About">About</div>





      
      





      
      





      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/posts" title="Archives">
  <ion-icon class="group-hover:text-primary-content" name="archive"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/categories" title="All Categories">
  <ion-icon class="group-hover:text-primary-content" name="grid"></ion-icon>
</a>


      
      
<a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="/tags" title="All Tags">
  <ion-icon class="group-hover:text-primary-content" name="pricetags"></ion-icon>
</a>


      

      

      
    </section>
  </div>
</nav>


    <div class="flip-container" :class="{ 'flip-it': flip }">
      <div class="flipper">
        <div class="front">
          <div class="container">
            
<div class="lg:grid lg:grid-cols-4 gap-4 mt-4 px-4">
  <div class="hidden lg:block">
    
  </div>

  <div class="lg:col-span-2">
    <article class="mx-auto prose prose-quoteless dark:prose-invert" id="dream-single-post-main" itemscope itemtype="http://schema.org/Article">
      
  <meta itemprop="name" content="ã€ComfyUIã€‘æ‰¹é‡ç”Ÿæˆè‡ªåŠ¨åŒ–">
  <meta itemprop="description" content="ä¸ºè§£å†³YOLOé¡¹ç›®æ•°æ®ä¸è¶³é—®é¢˜ï¼Œä½œè€…é€šè¿‡ComfyUIå¯¼å‡ºå·¥ä½œæµAPIå¹¶ç¼–å†™Pythonè„šæœ¬ï¼Œå®ç°äº†æœ¬åœ°æ‰¹é‡å›¾ç‰‡çš„è‡ªåŠ¨åŒ–å¢å¼ºï¼Œé«˜æ•ˆç”Ÿæˆäº†ä¸€ä¸€å¯¹åº”çš„è®­ç»ƒå›¾åƒæ•°æ®ã€‚">
  <meta itemprop="datePublished" content="2025-12-01T00:00:00+08:00">
  <meta itemprop="dateModified" content="2025-12-01T00:00:00+08:00">
  <meta itemprop="wordCount" content="432">
  <meta itemprop="keywords" content="Diffusion,AIGC,AIç»˜ç”»,Python,ComfyUI,AP">

      <header>
        <h1 itemprop="headline">ã€ComfyUIã€‘æ‰¹é‡ç”Ÿæˆè‡ªåŠ¨åŒ–</h1>
        <p class="text-sm">
          
            Monday, Dec 1, 2025
          

          | <span>3 minute read</span>

          
          | <span>Updated at
            
              Monday, Dec 1, 2025
            </span>
          
        </p>

        
        <div class="flex justify-between">
          
            <div class="flex items-center">
  
  <span>@</span>
  

  <span itemprop="author" itemscope itemtype="https://schema.org/Person">
  
    <span itemprop="name">å¤æœˆæœˆä»”</span>
  
  </span>
</div>

          

          <div class="flex items-center gap-2">
  
  

  
  
  
  
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://x.com/intent/post?text=%e3%80%90ComfyUI%e3%80%91%e6%89%b9%e9%87%8f%e7%94%9f%e6%88%90%e8%87%aa%e5%8a%a8%e5%8c%96&amp;url=http://localhost:1313/posts/comfyuii2i%E6%89%B9%E9%87%8F%E7%94%9F%E6%88%90%E8%87%AA%E5%8A%A8%E5%8C%96/" target="_blank" rel="noopener noreferrer"
      title="Share on X">
      <ion-icon class="group-hover:text-primary-content" name="logo-x"></ion-icon>
    </a>
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://facebook.com/sharer/sharer.php?u=http://localhost:1313/posts/comfyuii2i%E6%89%B9%E9%87%8F%E7%94%9F%E6%88%90%E8%87%AA%E5%8A%A8%E5%8C%96/" target="_blank" rel="noopener noreferrer"
      title="Share on Facebook">
      <ion-icon class="group-hover:text-primary-content" name="logo-facebook"></ion-icon>
    </a>
  
    <a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary"
      href="https://wa.me/?text=%e3%80%90ComfyUI%e3%80%91%e6%89%b9%e9%87%8f%e7%94%9f%e6%88%90%e8%87%aa%e5%8a%a8%e5%8c%96%20http://localhost:1313/posts/comfyuii2i%E6%89%B9%E9%87%8F%E7%94%9F%E6%88%90%E8%87%AA%E5%8A%A8%E5%8C%96/" target="_blank" rel="noopener noreferrer"
      title="Share on WhatsApp">
      <ion-icon class="group-hover:text-primary-content" name="logo-whatsapp"></ion-icon>
    </a>
  

  
  
</div>

        </div>
      </header>

      <section id="dream-single-post-content" itemprop="articleBody">
        

        <p>ä½œè€…é’ˆå¯¹YOLOé¡¹ç›®æ•°æ®ä¸è¶³çš„é—®é¢˜ï¼Œåˆ©ç”¨ComfyUIè¿›è¡Œæ•°æ®å¢å¼ºã€‚ç”±äºå®˜æ–¹æ‰¹é‡åŠŸèƒ½ä¸é€‚ç”¨ï¼Œä»–é€šè¿‡å¯¼å‡ºå·¥ä½œæµAPIå¹¶ç¼–å†™Pythonè„šæœ¬ï¼Œå®ç°äº†æœ¬åœ°æ‰¹é‡å›¾ç‰‡çš„è‡ªåŠ¨åŒ–å¤„ç†ï¼Œé«˜æ•ˆç”Ÿæˆè®­ç»ƒæ‰€éœ€çš„ä¸€å¯¹ä¸€å¯¹åº”å›¾åƒæ•°æ®ã€‚</p>
<p>ä¹‹å‰ç©ä¸€ä¸ªyoloé¡¹ç›®çš„æ—¶å€™ç¢°ä¸Šäº†æ•°æ®ä¸è¶³è®­ç»ƒç»“æœå¾ˆå·®çš„é—®é¢˜ï¼Œåˆšå¥½ç°åœ¨AIç”Ÿå›¾è¿™ä¹ˆå‘è¾¾ï¼Œè€Œè‡ªå·±ä¹‹å‰æœ‰æ‘¸ç´¢è¿‡ä¸€ç‚¹ä½¿ç”¨ComfyUIç”Ÿå›¾çš„å·¥ä½œæµï¼Œç´¢æ€§å¼€å§‹ç”¨ComfyUIå¼€å§‹é€ æ•°æ®ã€‚ComfyUIæœ¬èº«æ˜¯æ”¯æŒå¤šæ‰¹æ¬¡ç”ŸæˆåŠŸèƒ½çš„ã€‚è®¾ç½®æ¬¡æ•°åå¯ä»¥åå¤è¿è¡Œè¯¥å·¥ä½œæµï¼Œä½†æ˜¯å®˜æ–¹æä¾›çš„è¿™ä¸ªæ›´å¤šæ˜¯é¢å‘åŒä¸€æç¤ºè¯ã€ä¸åŒéšæœºç§å­æŠ½å¡æƒ…å†µçš„ã€‚</p>
<p><figure style="text-align: center; margin: 1.5rem auto;">
  
  <img src="http://localhost:1313/posts/c/users/hu/appdata/roaming/typora/typora-user-images/image-20251201204323062.png" 
       alt="image-20251201204323062" 
       
       class="zoomable" 
       style="max-width: 100%; height: auto; border-radius: 8px; cursor: zoom-in;"
       loading="lazy" />
  
    <figcaption style="margin-top: 8px; font-size: 0.85em; color: #888; font-style: italic;">
      image-20251201204323062
    </figcaption>
  
</figure></p>
<p>æˆ‘é€ æ•°æ®éœ€è¦çš„å·¥å†µåˆ™æ˜¯ï¼š</p>



  <blockquote>
    <p>Nå¼ å›¾ç‰‡ç»è¿‡å·¥ä½œæµå¤„ç†ç”ŸæˆNå¼ å›¾ç‰‡,æ¯å¯¹å›¾ç‰‡ä¸€ä¸€å¯¹åº”</p>

  </blockquote>

<p>æ˜¾ç„¶å’Œå®˜æ–¹æä¾›çš„æ–¹æ³•ä¸å¤ªåŒ¹é…ï¼Œä¸­é—´ä¹Ÿæ‰¾äº†å‡ ç¯‡åšå®¢ï¼Œæœ‰çš„æ˜¯æä¾›äº†æ‰¹é‡åŠ è½½å›¾ç‰‡èŠ‚ç‚¹ï¼Œé…åˆå·¥ä½œæµçš„ä¸€ä¸ªå¾ªç¯ï¼ˆLoopStartå’ŒLoopEndï¼‰å»å®ç°çš„ï¼Œä¸ªäººå°è¯•äº†ä¸€ä¸‹å‘ç°å…¶é™åˆ¶å¾ˆå¤§ï¼Œæ¯æ¬¡é™åˆ¶åŠ è½½100å¼ ï¼Œè€Œä¸”å¾ªç¯çš„é€»è¾‘å¾ˆéš¾ç”¨ï¼Œè¿˜ä¼šå‡ºç°é‡å¤åŠ è½½çš„é—®é¢˜ï¼Œåªèƒ½ç®—æ˜¯é¢å‘éç¨‹åºäººå‘˜çš„è§£å†³æ–¹æ¡ˆäº†ã€‚</p>
<p><figure style="text-align: center; margin: 1.5rem auto;">
  
  <img src="https://uinodes.com/_next/image?url=%2Fimg%2Fplugins%2FComfyUI-Easy-Use%2Fcompressed%2FLGQn8E9iXbgQMmp3dnQx5Y.webp&amp;w=3840&amp;q=75" 
       alt="Load Images For Loopæ–‡ç« å›¾ç‰‡" 
       
       class="zoomable" 
       style="max-width: 100%; height: auto; border-radius: 8px; cursor: zoom-in;"
       loading="lazy" />
  
    <figcaption style="margin-top: 8px; font-size: 0.85em; color: #888; font-style: italic;">
      Load Images For Loopæ–‡ç« å›¾ç‰‡
    </figcaption>
  
</figure></p>
<p>è¿˜æœ‰äº›æ–¹æ³•å°±æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„å¹³å°æˆ–è€…æ’ä»¶ç­‰è°ƒç”¨APIï¼Œè¯¥æ–¹æ³•çš„è§£å†³é—®é¢˜æ˜¯å¾ˆä¸é”™çš„ã€‚è¿™é‡Œç•™ä¸€ä¸ªé“¾æ¥æ–¹ä¾¿ä»¥åæŸ¥æ‰¾<a href="https://doc.51easyai.com/getting-started/quickstart" target="_blank">å¿«é€Ÿå¼€å§‹ - EasyAIåœ¨çº¿æ–‡æ¡£</a>
ã€‚ä½†æ˜¯æ„Ÿè§‰æˆ‘å°±å¾ˆç®€å•ä¸€ä¸ªéœ€æ±‚ï¼Œå®Œå…¨æ²¡å¿…è¦ç”¨è¿™ä¹ˆå¤æ‚çš„ä¸œè¥¿ï¼Œç´¢æ€§è‡ªå·±é…åˆGPTæ•´ç†äº†ä¸€ä¸ªè„šæœ¬ï¼Œç”¨äºæœ¬åœ°çš„Image2Imageçš„å·¥ä½œæµæ‰¹é‡è¿è¡Œ.</p>
<h3 id="comfyuiå¯¼å‡ºå·¥ä½œæµä¸ºapi">ComfyUIå¯¼å‡ºå·¥ä½œæµä¸ºAPI</h3>
<p>è¦æ³¨æ„åœ¨ä¿å­˜å¯¼å‡ºä¸ºAPIä¹‹å‰ï¼Œå·¥ä½œæµä¸­çš„é¢„è§ˆå›¾ç‰‡èŠ‚ç‚¹è¦å°½é‡å»é™¤ï¼ŒèŠ‚çœç®—åŠ›ï¼ŒåŒæ—¶è¦ä¿è¯è¯¥å·¥ä½œæµæ˜¯ç¡®å®å¯ç”¨çš„ï¼Œå¯ä»¥è¿è¡Œå‡ºå›¾çš„ã€‚</p>
<p><figure style="text-align: center; margin: 1.5rem auto;">
  
  <img src="http://localhost:1313/posts/c/users/hu/appdata/roaming/typora/typora-user-images/image-20251201210839690.png" 
       alt="image-20251201210839690" 
       
       class="zoomable" 
       style="max-width: 100%; height: auto; border-radius: 8px; cursor: zoom-in;"
       loading="lazy" />
  
    <figcaption style="margin-top: 8px; font-size: 0.85em; color: #888; font-style: italic;">
      image-20251201210839690
    </figcaption>
  
</figure></p>
<p>å¯¼å‡ºåå¯ä»¥å¾—åˆ°ä¸€ä¸ª.jsonåç¼€çš„æ–‡ä»¶ï¼Œå°±æ˜¯å¯ä»¥ç”¨äºpythonè„šæœ¬ä¸­APIè°ƒç”¨çš„æ–‡ä»¶äº†ã€‚</p>
<h3 id="é…ç½®è„šæœ¬è¿è¡Œ">é…ç½®è„šæœ¬è¿è¡Œ</h3>
<p>è„šæœ¬å¦‚ä¸‹ï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª&quot;ComfyUIè¿œç¨‹æ§åˆ¶å™¨&quot;ï¼Œçœå»äº†è‡ªå·±ä¸€ä¸ªä¸€ä¸ªé…ç½®å‚æ•°çš„éº»çƒ¦ã€‚</p>
<p>ä½¿ç”¨çš„æ—¶å€™åªéœ€è¦ç¨‹åºå¤´éƒ¨çš„è¾“å…¥è¾“å‡ºè·¯å¾„è¿›è¡Œé…ç½®ï¼ŒæŠŠå¯¼å‡ºçš„comfyUIå·¥ä½œæµé…ç½®å¥½å³å¯ï¼Œç¨‹åºå°±å¯ä»¥è‡ªåŠ¨çš„å¯¹è¾“å…¥è·¯å¾„çš„å…¨éƒ¨ç…§ç‰‡è¿›è¡Œå¤„ç†ï¼Œå¦‚æœä½ çš„æ˜¾å­˜è¶³å¤Ÿå¤§ï¼Œè§‰å¾—åŒæ—¶è·‘å¤šæ‰¹æ¬¡ä¹Ÿæ²¡é—®é¢˜ï¼Œé‚£æ¨èå†å¼€ä¸€ä¸ªå¤šçº¿ç¨‹åŠ è½½ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e">#!/usr/bin/env python3</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">ComfyUI æç®€æ‰¹é‡å›¾ç‰‡å¤„ç†è„šæœ¬
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">å°†å·¥ä½œæµJSONå’Œæ‰€æœ‰é…ç½®å‚æ•°é›†ä¸­åœ¨ä»£ç å¤´éƒ¨ï¼Œå¼€ç®±å³ç”¨
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> requests
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> json
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> time
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> glob
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> pathlib <span style="color:#f92672">import</span> Path
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ===================== ç”¨æˆ·é…ç½®åŒºåŸŸ =====================</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># æ³¨æ„ï¼šæ‰€æœ‰è·¯å¾„å»ºè®®ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²ï¼ˆå‰é¢åŠ rï¼‰é¿å…è½¬ä¹‰é—®é¢˜</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 1. è¾“å…¥è¾“å‡ºè®¾ç½®</span>
</span></span><span style="display:flex;"><span>INPUT_FOLDER <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;D:\CutRes\buzzer&#34;</span>       <span style="color:#75715e"># è¾“å…¥å›¾ç‰‡æ–‡ä»¶å¤¹è·¯å¾„</span>
</span></span><span style="display:flex;"><span>OUTPUT_FOLDER <span style="color:#f92672">=</span> <span style="color:#e6db74">r</span><span style="color:#e6db74">&#34;D:\inCutRes\buzzer&#34;</span>    <span style="color:#75715e"># è¾“å‡ºæ–‡ä»¶å¤¹è·¯å¾„</span>
</span></span><span style="display:flex;"><span>WORKFLOW_FILE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;api_workflow.json&#34;</span>      <span style="color:#75715e"># ComfyUIå¯¼å‡ºçš„å·¥ä½œæµJSONæ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2. ComfyUIæœåŠ¡å™¨è®¾ç½®</span>
</span></span><span style="display:flex;"><span>COMFYUI_SERVER <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;http://127.0.0.1:8188&#34;</span> <span style="color:#75715e"># ComfyUIæœåŠ¡å™¨åœ°å€</span>
</span></span><span style="display:flex;"><span>TIMEOUT <span style="color:#f92672">=</span> <span style="color:#ae81ff">60</span>                             <span style="color:#75715e"># å•å¼ å›¾ç‰‡æœ€å¤§å¤„ç†ç­‰å¾…æ—¶é—´(ç§’)</span>
</span></span><span style="display:flex;"><span>RETRY_TIMES <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>                          <span style="color:#75715e"># å¤±è´¥é‡è¯•æ¬¡æ•°</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3. å›¾ç‰‡å¤„ç†è®¾ç½®</span>
</span></span><span style="display:flex;"><span>IMAGE_EXTENSIONS <span style="color:#f92672">=</span> (<span style="color:#e6db74">&#39;.png&#39;</span>, <span style="color:#e6db74">&#39;.jpg&#39;</span>, <span style="color:#e6db74">&#39;.jpeg&#39;</span>, <span style="color:#e6db74">&#39;.webp&#39;</span>)  <span style="color:#75715e"># æ”¯æŒçš„å›¾ç‰‡æ ¼å¼</span>
</span></span><span style="display:flex;"><span>OVERWRITE_EXISTING <span style="color:#f92672">=</span> <span style="color:#66d9ef">False</span>               <span style="color:#75715e"># æ˜¯å¦è¦†ç›–å·²å­˜åœ¨çš„è¾“å‡ºæ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 4. åŠ¨æ€å‚æ•°è®¾ç½® (æ ¹æ®ä½ çš„å·¥ä½œæµèŠ‚ç‚¹å‚æ•°è°ƒæ•´)</span>
</span></span><span style="display:flex;"><span>CUSTOM_PARAMETERS <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># ç¤ºä¾‹å‚æ•°ï¼ˆæ ¹æ®ä½ çš„å·¥ä½œæµå®é™…å‚æ•°åä¿®æ”¹ï¼‰ï¼š</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># &#34;denoise&#34;: 0.7,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># &#34;steps&#34;: 20,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># &#34;cfg_scale&#34;: 7.5,</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># &#34;seed&#34;: -1,</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ===================== ä¸»ç¨‹åº =====================</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">main</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># åˆå§‹åŒ–æ£€æŸ¥</span>
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;=&#34;</span><span style="color:#f92672">*</span><span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;ComfyUI æ‰¹é‡å›¾ç‰‡å¤„ç†å™¨&#34;</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;è¾“å…¥ç›®å½•: </span><span style="color:#e6db74">{</span>INPUT_FOLDER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;è¾“å‡ºç›®å½•: </span><span style="color:#e6db74">{</span>OUTPUT_FOLDER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;=&#34;</span><span style="color:#f92672">*</span><span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># æ£€æŸ¥æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>isdir(INPUT_FOLDER):
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;é”™è¯¯ï¼šè¾“å…¥æ–‡ä»¶å¤¹ä¸å­˜åœ¨ </span><span style="color:#e6db74">{</span>INPUT_FOLDER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># ç¡®ä¿è¾“å‡ºæ–‡ä»¶å¤¹å­˜åœ¨</span>
</span></span><span style="display:flex;"><span>    os<span style="color:#f92672">.</span>makedirs(OUTPUT_FOLDER, exist_ok<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># åŠ è½½å·¥ä½œæµ</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">with</span> open(WORKFLOW_FILE, <span style="color:#e6db74">&#39;r&#39;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf-8&#39;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>            workflow <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>load(f)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;âœ… æˆåŠŸåŠ è½½å·¥ä½œæµæ–‡ä»¶: </span><span style="color:#e6db74">{</span>WORKFLOW_FILE<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;âŒ åŠ è½½å·¥ä½œæµæ–‡ä»¶å¤±è´¥: </span><span style="color:#e6db74">{</span>e<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># è·å–å›¾ç‰‡åˆ—è¡¨</span>
</span></span><span style="display:flex;"><span>    image_files <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>        f <span style="color:#66d9ef">for</span> f <span style="color:#f92672">in</span> glob<span style="color:#f92672">.</span>glob(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(INPUT_FOLDER, <span style="color:#e6db74">&#34;*.*&#34;</span>)) 
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> f<span style="color:#f92672">.</span>lower()<span style="color:#f92672">.</span>endswith(IMAGE_EXTENSIONS)
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> image_files:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;âš ï¸ æ²¡æœ‰æ‰¾åˆ°æ”¯æŒçš„å›¾ç‰‡æ–‡ä»¶ï¼ˆæ‰©å±•å: </span><span style="color:#e6db74">{</span>IMAGE_EXTENSIONS<span style="color:#e6db74">}</span><span style="color:#e6db74">ï¼‰&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;æ‰¾åˆ° </span><span style="color:#e6db74">{</span>len(image_files)<span style="color:#e6db74">}</span><span style="color:#e6db74"> å¼ å¾…å¤„ç†å›¾ç‰‡&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># å¤„ç†æ¯å¼ å›¾ç‰‡</span>
</span></span><span style="display:flex;"><span>    success_count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i, img_path <span style="color:#f92672">in</span> enumerate(image_files, <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>        img_name <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>basename(img_path)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">[</span><span style="color:#e6db74">{</span>i<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">{</span>len(image_files)<span style="color:#e6db74">}</span><span style="color:#e6db74">] æ­£åœ¨å¤„ç†: </span><span style="color:#e6db74">{</span>img_name<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># æ£€æŸ¥è¾“å‡ºæ˜¯å¦å·²å­˜åœ¨</span>
</span></span><span style="display:flex;"><span>        output_exists <span style="color:#f92672">=</span> any(glob<span style="color:#f92672">.</span>glob(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(OUTPUT_FOLDER, <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;*</span><span style="color:#e6db74">{</span>os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>splitext(img_name)[<span style="color:#ae81ff">0</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">*&#34;</span>)))
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> output_exists <span style="color:#f92672">and</span> <span style="color:#f92672">not</span> OVERWRITE_EXISTING:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;â© è·³è¿‡ï¼ˆè¾“å‡ºæ–‡ä»¶å·²å­˜åœ¨ï¼‰&#34;</span>)
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>        
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># å¸¦é‡è¯•æœºåˆ¶çš„å›¾ç‰‡å¤„ç†</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> attempt <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, RETRY_TIMES <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>                <span style="color:#75715e"># ä¸Šä¼ å›¾ç‰‡</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">with</span> open(img_path, <span style="color:#e6db74">&#34;rb&#34;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>                    files <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;image&#39;</span>: (img_name, f, <span style="color:#e6db74">&#39;image/png&#39;</span>)}
</span></span><span style="display:flex;"><span>                    upload_response <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>post(
</span></span><span style="display:flex;"><span>                        <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>COMFYUI_SERVER<span style="color:#e6db74">}</span><span style="color:#e6db74">/upload/image&#34;</span>, 
</span></span><span style="display:flex;"><span>                        files<span style="color:#f92672">=</span>files,
</span></span><span style="display:flex;"><span>                        timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>                    )
</span></span><span style="display:flex;"><span>                    upload_response<span style="color:#f92672">.</span>raise_for_status()
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#75715e"># å‡†å¤‡å·¥ä½œæµ</span>
</span></span><span style="display:flex;"><span>                current_workflow <span style="color:#f92672">=</span> json<span style="color:#f92672">.</span>loads(json<span style="color:#f92672">.</span>dumps(workflow))  <span style="color:#75715e"># æ·±æ‹·è´</span>
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#75715e"># æ›¿æ¢å›¾ç‰‡æ–‡ä»¶å</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">for</span> node_id, node <span style="color:#f92672">in</span> current_workflow<span style="color:#f92672">.</span>items():
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">if</span> node<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;class_type&#34;</span>) <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;LoadImage&#34;</span>:
</span></span><span style="display:flex;"><span>                        current_workflow[node_id][<span style="color:#e6db74">&#34;inputs&#34;</span>][<span style="color:#e6db74">&#34;image&#34;</span>] <span style="color:#f92672">=</span> img_name
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#75715e"># æ›¿æ¢è‡ªå®šä¹‰å‚æ•°</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">for</span> param_name, param_value <span style="color:#f92672">in</span> CUSTOM_PARAMETERS<span style="color:#f92672">.</span>items():
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">for</span> node_id, node <span style="color:#f92672">in</span> current_workflow<span style="color:#f92672">.</span>items():
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">if</span> param_name <span style="color:#f92672">in</span> node<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;inputs&#34;</span>, {}):
</span></span><span style="display:flex;"><span>                            current_workflow[node_id][<span style="color:#e6db74">&#34;inputs&#34;</span>][param_name] <span style="color:#f92672">=</span> param_value
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#75715e"># æäº¤ä»»åŠ¡</span>
</span></span><span style="display:flex;"><span>                response <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>post(
</span></span><span style="display:flex;"><span>                    <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>COMFYUI_SERVER<span style="color:#e6db74">}</span><span style="color:#e6db74">/prompt&#34;</span>, 
</span></span><span style="display:flex;"><span>                    json<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;prompt&#34;</span>: current_workflow},
</span></span><span style="display:flex;"><span>                    timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>                )
</span></span><span style="display:flex;"><span>                response<span style="color:#f92672">.</span>raise_for_status()
</span></span><span style="display:flex;"><span>                prompt_id <span style="color:#f92672">=</span> response<span style="color:#f92672">.</span>json()[<span style="color:#e6db74">&#34;prompt_id&#34;</span>]
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#75715e"># ç­‰å¾…å¤„ç†å®Œæˆ</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">for</span> wait_time <span style="color:#f92672">in</span> range(TIMEOUT):
</span></span><span style="display:flex;"><span>                    time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    history <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(
</span></span><span style="display:flex;"><span>                        <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>COMFYUI_SERVER<span style="color:#e6db74">}</span><span style="color:#e6db74">/history/</span><span style="color:#e6db74">{</span>prompt_id<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>,
</span></span><span style="display:flex;"><span>                        timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>                    )<span style="color:#f92672">.</span>json()
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">if</span> prompt_id <span style="color:#f92672">in</span> history:
</span></span><span style="display:flex;"><span>                        <span style="color:#75715e"># ä¿å­˜è¾“å‡ºå›¾ç‰‡</span>
</span></span><span style="display:flex;"><span>                        outputs <span style="color:#f92672">=</span> history[prompt_id]<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;outputs&#34;</span>, {})
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">for</span> node_output <span style="color:#f92672">in</span> outputs<span style="color:#f92672">.</span>values():
</span></span><span style="display:flex;"><span>                            <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#34;images&#34;</span> <span style="color:#f92672">in</span> node_output:
</span></span><span style="display:flex;"><span>                                <span style="color:#66d9ef">for</span> img <span style="color:#f92672">in</span> node_output[<span style="color:#e6db74">&#34;images&#34;</span>]:
</span></span><span style="display:flex;"><span>                                    output_filename <span style="color:#f92672">=</span> <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>splitext(img_name)[<span style="color:#ae81ff">0</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">_</span><span style="color:#e6db74">{</span>img[<span style="color:#e6db74">&#39;filename&#39;</span>]<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>                                    output_path <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(OUTPUT_FOLDER, output_filename)
</span></span><span style="display:flex;"><span>                                    
</span></span><span style="display:flex;"><span>                                    image_data <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(
</span></span><span style="display:flex;"><span>                                        <span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">{</span>COMFYUI_SERVER<span style="color:#e6db74">}</span><span style="color:#e6db74">/view&#34;</span>,
</span></span><span style="display:flex;"><span>                                        params<span style="color:#f92672">=</span>{
</span></span><span style="display:flex;"><span>                                            <span style="color:#e6db74">&#34;filename&#34;</span>: img[<span style="color:#e6db74">&#34;filename&#34;</span>],
</span></span><span style="display:flex;"><span>                                            <span style="color:#e6db74">&#34;subfolder&#34;</span>: img<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;subfolder&#34;</span>, <span style="color:#e6db74">&#34;&#34;</span>),
</span></span><span style="display:flex;"><span>                                            <span style="color:#e6db74">&#34;type&#34;</span>: img<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#34;type&#34;</span>, <span style="color:#e6db74">&#34;output&#34;</span>)
</span></span><span style="display:flex;"><span>                                        },
</span></span><span style="display:flex;"><span>                                        timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>                                    )<span style="color:#f92672">.</span>content
</span></span><span style="display:flex;"><span>                                    
</span></span><span style="display:flex;"><span>                                    <span style="color:#66d9ef">with</span> open(output_path, <span style="color:#e6db74">&#34;wb&#34;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>                                        f<span style="color:#f92672">.</span>write(image_data)
</span></span><span style="display:flex;"><span>                                    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;âœ… ä¿å­˜: </span><span style="color:#e6db74">{</span>output_filename<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        success_count <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">break</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>                    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;âš ï¸ å¤„ç†è¶…æ—¶ï¼ˆ</span><span style="color:#e6db74">{</span>TIMEOUT<span style="color:#e6db74">}</span><span style="color:#e6db74">ç§’ï¼‰&#34;</span>)
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">break</span>  <span style="color:#75715e"># å¤„ç†æˆåŠŸï¼Œè·³å‡ºé‡è¯•å¾ªç¯</span>
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>                print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;âš ï¸ å°è¯• </span><span style="color:#e6db74">{</span>attempt<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">{</span>RETRY_TIMES<span style="color:#e6db74">}</span><span style="color:#e6db74"> å¤±è´¥: </span><span style="color:#e6db74">{</span>str(e)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> attempt <span style="color:#f92672">==</span> RETRY_TIMES:
</span></span><span style="display:flex;"><span>                    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;âŒ æ”¾å¼ƒå¤„ç†: </span><span style="color:#e6db74">{</span>img_name<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>                time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># æ‰“å°æ‘˜è¦</span>
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;=&#34;</span><span style="color:#f92672">*</span><span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;å¤„ç†å®Œæˆï¼æˆåŠŸ </span><span style="color:#e6db74">{</span>success_count<span style="color:#e6db74">}</span><span style="color:#e6db74">/</span><span style="color:#e6db74">{</span>len(image_files)<span style="color:#e6db74">}</span><span style="color:#e6db74"> å¼ å›¾ç‰‡&#34;</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;è¾“å‡ºç›®å½•: </span><span style="color:#e6db74">{</span>OUTPUT_FOLDER<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;=&#34;</span><span style="color:#f92672">*</span><span style="color:#ae81ff">50</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    main()
</span></span></code></pre></div>


  <blockquote class="dream-alert important">
    <p class="heading">
      <ion-icon name="sparkles-outline"></ion-icon>Important</p>
    <p>è¦æ³¨æ„ä½¿ç”¨çš„æ—¶å€™éœ€è¦ç¡®ä¿ï¼š</p>
<ul>
<li>
<p>ComfyUIæ­£åœ¨è¿è¡Œä¸”å¯è®¿é—®ï¼Œå› ä¸ºè¯¥è¿›ç¨‹å°†ç›´æ¥ä½œä¸ºæœåŠ¡ç«¯</p>
</li>
<li>
<p>åœ°å€ç«¯å£æ­£ç¡®ï¼ˆé»˜è®¤127.0.0.1:8188ï¼‰</p>
</li>
<li>
<p>æ²¡æœ‰å…¶ä»–ä»»åŠ¡åœ¨æ’é˜Ÿ</p>
</li>
</ul>
  </blockquote>

<p><figure style="text-align: center; margin: 1.5rem auto;">
  
  <img src="http://localhost:1313/posts/c/users/hu/appdata/roaming/typora/typora-user-images/image-20251201210952597.png" 
       alt="image-20251201210952597" 
       
       class="zoomable" 
       style="max-width: 100%; height: auto; border-radius: 8px; cursor: zoom-in;"
       loading="lazy" />
  
    <figcaption style="margin-top: 8px; font-size: 0.85em; color: #888; font-style: italic;">
      image-20251201210952597
    </figcaption>
  
</figure></p>
<p>å¦‚æ­¤å°±å¯ä»¥äº¤ç»™è¯¥è„šæœ¬çº¿æ€§çš„å¤„ç†æˆ‘é…ç½®æ–‡ä»¶å¤¹ä¸­æ‰€æœ‰çš„å›¾ç‰‡ä¸”ä¸ä¼šå‡ºç°åŠ è½½é‡å¤çš„é—®é¢˜äº†ï¼Œè€Œæˆ‘æœ¬äººå°±å¯ä»¥å®‰å¿ƒç¡å¤§è§‰å»äº†!</p>


        
      </section>

      

      
    </article>
  </div>

  <div
    x-data="tocHighlighter()"
    @scroll.window="debouncedScroll"
    class="hidden lg:flex lg:flex-col lg:items-end lg:self-start"
  >
    
  </div>
</div>


            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>
    Â© 2021 - 2025 å¤æœˆæœˆä»”çš„åšå®¢
  </p>
  

  
  <p class="text-sm">
    ğŸŒ±
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with theme
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
        <div class="back">
          <div class="container">
            
            <div class="dream-grid dream-grid-about">
  
  
  
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    <article
      class="card bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"
    >
      <div class="card-body">
        <div class="card-title">å…³äºæˆ‘</div>

        <div class="prose dark:prose-invert">
          <ul>
<li>æˆ‘æ˜¯<strong>å¤æœˆæœˆä»”</strong></li>
<li><strong>Ethan Hu</strong></li>
<li>åˆ†äº«æŠ€æœ¯å­¦ä¹ ç¬”è®°ä¸ç”Ÿæ´»ç‚¹æ»´</li>
<li><strong>ç°å±…</strong>ï¼š ä¸Šæµ· ä¸­å›½</li>
<li><strong>å®¶ä¹¡</strong>ï¼š å¹³é¥ å±±è¥¿</li>
</ul>

        </div>
      </div>
    </article>
  </div>
  
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    <article
      class="card bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"
    >
      <div class="card-body">
        <div class="card-title">åœ¨ç”¨çš„å­¦ä¹ å·¥å…·</div>

        <div class="prose dark:prose-invert">
          <ul>
<li>ğŸ“ <a href="https://typora.io/" target="_blank">Typora</a>
 â€”â€” æè‡´ç®€æ´çš„ Markdown ç¼–è¾‘å™¨ï¼ŒåŠ©åŠ›æ²‰æµ¸å¼æ–‡æ¡£æ’°å†™ä¸çŸ¥è¯†è®°å½•ã€‚</li>
<li>ğŸ““ <a href="https://www.notion.so/" target="_blank">Notion</a>
 â€”â€” ä¸€ç«™å¼å·¥ä½œç©ºé—´ï¼Œç”¨äºæ­å»ºä¸ªäººçŸ¥è¯†åº“ã€é¡¹ç›®ç®¡ç†ä¸æ·±åº¦åä½œã€‚</li>
<li>ğŸ”— <a href="https://n8n.io/" target="_blank">N8N</a>
 â€”â€” å¼ºå¤§çš„åŸºäºèŠ‚ç‚¹çš„è‡ªåŠ¨åŒ–å·¥ä½œæµå·¥å…·ï¼Œè½»æ¾å®ç°ä¸åŒåº”ç”¨é—´çš„é€»è¾‘è”åŠ¨ã€‚</li>
<li>ğŸ¤– <a href="https://gemini.google.com/" target="_blank">Gemini</a>
 â€”â€” æ™ºèƒ½ AI åŠ©æ‰‹ï¼Œåœ¨ä»£ç è¾…åŠ©ã€åˆ›æ„æ¿€å‘ä¸ä¿¡æ¯æ£€ç´¢ä¸­æä¾›å¼ºåŠ›æ”¯æ’‘ã€‚</li>
</ul>

        </div>
      </div>
    </article>
  </div>
  
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    <article
      class="card bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"
    >
      <div class="card-body">
        <div class="card-title">æˆ‘çš„çˆ±å¥½</div>

        <div class="prose dark:prose-invert">
          <ul>
<li>ğŸš€ å–œæ¬¢æŠ˜è…¾å„ç§å¥½ç©çš„æŠ€æœ¯</li>
<li>ğŸ“¸ ä¸šä½™æ‘„å½±çˆ±å¥½è€…</li>
<li>ğŸ® å„ç±»æ¸¸æˆç©å®¶</li>
<li>ğŸ’» æ•°ç äº§å“æŠ˜è…¾çˆ±å¥½è€…</li>
<li>ğŸ“š é˜…è¯»ï¼šèµ«å°”æ›¼Â·é»‘å¡ &amp; é˜¿å°”è´Â·åŠ ç¼ª</li>
<li>ğŸï¸ è¿½ç•ªä¸­ï¼šã€Šç”µé”¯äººï¼šè•¾å¡ç¯‡ã€‹</li>
<li>ğŸ¬ ç»å…¸é‡æ¸©ï¼šã€Šå‘½è¿çŸ³ä¹‹é—¨ã€‹</li>
</ul>

        </div>
      </div>
    </article>
  </div>
  
  <div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column">
    <article
      class="card bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"
    >
      <div class="card-body">
        <div class="card-title">æœ€è¿‘æ­£åœ¨å­¦</div>

        <div class="prose dark:prose-invert">
          <ul>
<li>ğŸ¨ <a href="https://games104.boomingtech.com/" target="_blank">GAMES104</a>
 â€”â€” ç°ä»£æ¸¸æˆå¼•æ“å…¥é—¨ã€‚</li>
<li>ğŸ”ï¸ <a href="https://www.sidefx.com/learn/" target="_blank">Houdini åŸºç¡€</a>
 â€”â€” å­¦ä¹ ç¨‹åºåŒ–å»ºæ¨¡ä¸ç‰¹æ•ˆã€‚</li>
<li>ğŸ¤— <a href="https://huggingface.co/learn" target="_blank">Hugging Face</a>
 â€”â€” æ¢ç´¢å¼€æº AI ç¤¾åŒºã€‚</li>
</ul>

        </div>
      </div>
    </article>
  </div>
  
  

  

  
</div>

            

            
<footer class="flex justify-between items-center gap-2 px-4 py-12">

  <div>
  
  <p>
    Â© 2021 - 2025 å¤æœˆæœˆä»”çš„åšå®¢
  </p>
  

  
  <p class="text-sm">
    ğŸŒ±
    <span class="text-base-content/60">
      Powered by <a class="hover:underline" href="https://gohugo.io/" target="_blank">Hugo</a> with theme
      <a class="hover:underline" href="https://github.com/g1eny0ung/hugo-theme-dream" target="_blank">Dream</a>.</span
    >
  </p>
  
</div>

  <div
  x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }"
  class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"
>
  <template x-for="icon in icons">
    <div
      role="button"
      tabindex="0"
      :aria-label="'Select ' + icon.name + ' mode'"
      class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary"
      :class="$store.darkMode.icon() === icon.name && 'bg-primary'"
      @click="$store.darkMode.toggle(icon.status)"
    >
      <ion-icon
        :name="`${icon.name}-outline`"
        class="group-hover:text-primary-content"
        :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"
      >
      </ion-icon>
    </div>
  </template>
</div>

</footer>

          </div>
        </div>
      </div>
    </div>

    <script>
  window.lightTheme = "emerald"
  window.darkTheme = "forest"
</script>


  <script src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js"></script>

  
  
  <script src="/js/grid.js"></script>




<script src="/js/main.js"></script>
    







<script src="/js/toc.js"></script>




  




    

    
      <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js"></script>
<script>
  MathJax = {
    tex: {
      displayMath: [
        ['\\[', '\\]'],
        ['$$', '$$'],
      ], 
      inlineMath: [
        ['\\(', '\\)'],
        ['$', '$'],
      ], 
    },
  }
</script>

    

    

    

    <script type="module" src="https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.esm.js" integrity="sha256-/IFmi82bIhdYWctu0UddSlJqpnzWm7Vh2C4CM32wF/k=" crossorigin="anonymous"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.js" integrity="sha256-mr7eJMX3VC3F7G32mk4oWp1C6a2tlMYxUdptfT7uKI8=" crossorigin="anonymous"></script>
  </body>
</html>
