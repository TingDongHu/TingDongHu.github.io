--- 
title: ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ
date: 2025-06-27T00:00:00+08:00
mathjax: true
categories: ["Games101ç¬”è®°"]
tags: ["å›¾å½¢å­¦", "æ¸²æŸ“", "GAMESè¯¾ç¨‹", "çº¿æ€§ä»£æ•°"]
description: "è®¡ç®—æœºå›¾å½¢å­¦é€šè¿‡ç¼©æ”¾ã€é•œåƒã€é”™åˆ‡å’Œæ—‹è½¬ç­‰åŸºæœ¬å˜æ¢çŸ©é˜µï¼Œæè¿°ç‰©ä½“åœ¨äºŒç»´ç©ºé—´ä¸­çš„ä½ç½®ã€å¤§å°å’Œæ–¹å‘å˜åŒ–ã€‚"
cover: "/img/ComputerGraphics.png"
headerImage: "/img/rthykless.png"
math: true
--- 

è®¡ç®—æœºå›¾å½¢å­¦ä¸­çš„åŸºæœ¬å˜æ¢åŒ…æ‹¬ç¼©æ”¾ã€é•œåƒã€é”™åˆ‡å’Œæ—‹è½¬ï¼Œæ¯ç§å˜æ¢éƒ½å¯é€šè¿‡ç‰¹å®šçš„æ•°å­¦çŸ©é˜µæ¥æè¿°ç‰©ä½“åœ¨äºŒç»´ç©ºé—´ä¸­çš„ä½ç½®ã€å¤§å°å’Œæ–¹å‘å˜åŒ–ã€‚ 



**å˜æ¢Transformation**æ˜¯è®¡ç®—æœºå›¾å½¢å­¦ä¸­çš„åŸºç¡€æ¦‚å¿µï¼Œç”¨äºæè¿°å’Œæ“ä½œç‰©ä½“åœ¨äºŒç»´æˆ–ä¸‰ç»´ç©ºé—´ä¸­çš„ä½ç½®ã€æ–¹å‘å’Œå¤§å°ã€‚

![image-20250626180918517](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250626180918517.png)

## åŸºæœ¬å˜æ¢ç±»å‹

### ç¼©æ”¾å˜æ¢ï¼ˆScaleï¼‰

![image-20250626181358791](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250626181358791.png)

å¦‚å›¾æ‰€ç¤ºçš„åæ ‡è½´å†…ç‰©ä½“ç¼©æ”¾ï¼Œå…¶æ•°å­¦å˜æ¢å…¬å¼ä¸º:
$$
\begin{aligned}
x' &= s \cdot x \\
y' &= s \cdot y
\end{aligned}
$$
çŸ©é˜µæ ¼å¼è¡¨è¿°ä¸º:
$$
\begin{bmatrix}
x' \\
y'
\end{bmatrix}
=
\begin{bmatrix}
s & 0 \\
0 & s
\end{bmatrix}
\begin{bmatrix}
x \\
y
\end{bmatrix}
$$
è€Œä»¥æ­¤æ¨å¹¿ä¸ºéå¯¹ç§°ç¼©æ”¾å˜åŒ–:

![image-20250626182118627](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250626182118627.png)

æ­¤å¤„çš„çŸ©é˜µè¡¨è¿°å¦‚ä¸‹æ‰€ç¤º:
$$
S = 
\begin{bmatrix}
s_x & 0 \\
0 & s_y
\end{bmatrix}
=
\begin{bmatrix}
0.5 & 0 \\
0 & 1.0
\end{bmatrix}
$$

$$
\left[\begin{array}{l}
x^{\prime} \\ 
y^{\prime}
\end{array}\right]
=
\left[\begin{array}{cc}
s_{x} & 0 \\
0 & s_{y}
\end{array}\right]
\left[\begin{array}{l}
x \\ 
y
\end{array}\right]
$$

### é•œåƒå˜æ¢ï¼ˆReflectionï¼‰

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯¹äºé•œåƒå˜æ¢ï¼Œä¹Ÿæ˜¯ç›´æ¥ä¿®æ”¹x,yçš„å€¼å°±å¥½

![image-20250626182617520](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250626182617520.png)

å…¶æ•°å­¦å˜æ¢ä¸çŸ©é˜µè¡¨è¾¾å¦‚ä¸‹æ‰€ç¤º:
$$
\begin{cases}
x' = -x \\
y' = y
\end{cases}
$$

$$
\left[\begin{array}{l}
x^{\prime} \\ 
y^{\prime}
\end{array}\right]
=
\left[\begin{array}{cc}
-1 & 0 \\
0 & 1
\end{array}\right]
\left[\begin{array}{l}
x \\ 
y
\end{array}\right]
$$

### é”™åˆ‡å˜æ¢ï¼ˆShearï¼‰

![image-20250626184056089](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250626184056089.png)

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šå˜æ¢åçš„å›¾å½¢æ¯ä¸ªç‚¹çš„yåæ ‡éƒ½æ²¡å˜ï¼Œå¯¹äºå·¦ä¸Šè§’çš„ç‚¹æ¥è¯´å˜åŒ–åº”è¯¥æ˜¯0+aï¼Œå¯¹äºå³ä¸Šè§’çš„ç‚¹æ¥è¯´å˜åŒ–åº”è¯¥æ˜¯1+aï¼Œå¯¹äºå·¦è¾¹ä¸­é—´çš„ç‚¹æ¥è¯´å˜åŒ–åº”è¯¥æ˜¯0+a/2ï¼Œæ‰€ä»¥æ¯ä¸ªç‚¹çš„å˜åŒ–åº”è¯¥æ˜¯:
$$
x' = x + a y
$$
å…¶çŸ©é˜µè¡¨è¾¾ä¸ºï¼š
$$
\left[\begin{array}{l}
x^{\prime} \\
y^{\prime}
\end{array}\right]
=
\left[\begin{array}{ll}
1 & a \\
0 & 1
\end{array}\right]
\left[\begin{array}{l}
x \\
y
\end{array}\right]
$$

### æ—‹è½¬å˜æ¢ï¼ˆRotationï¼‰

![image-20250626235525832](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250626235525832.png)

æˆ‘ä»¬å‡è®¾æ—‹è½¬è§’ä¸º

ä»¥åŸæ¥çš„åŸç‚¹ã€xè½´ç‚¹ã€yè½´ç‚¹ä¸ºä¾‹è¿›è¡Œè§‚å¯Ÿ

![image-20250626235829319](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250626235829319.png)

åŸæœ¬çš„xè½´ç‚¹ä»ï¼ˆx,0ï¼‰å˜ä¸ºï¼ˆ x* cosÎ¸, x* sinÎ¸ï¼‰,è€ŒåŸæœ¬çš„yè½´ç‚¹ç”±ï¼ˆ0,yï¼‰å˜ä¸ºï¼ˆ-y*sinÎ¸ï¼Œy * cosÎ¸ï¼‰.
$$
\begin{cases}
x' = a x + b y \\
y' = c x + d y
\end{cases}
$$
è¿™é‡Œæˆ‘ä»¬å‡è®¾åŸæœ¬çš„åæ ‡å‘é‡ï¼ˆx,yï¼‰ä¹˜ä»¥ä¸€ä¸ªæ—‹è½¬çŸ©é˜µå‘é‡Rä»è€Œå¾—åˆ°äº†ç°åœ¨çš„åæ ‡å‘é‡(x',y')
$$
\left[\begin{array}{c}
x' \\
y'
\end{array}\right]
=
\left[\begin{array}{cc}
a & b \\
c & d
\end{array}\right]
\left[\begin{array}{c}
x \\
y
\end{array}\right]
$$
å…¶å…¬å¼æ¨å¯¼å¦‚ä¸‹:

![image-20250627000807847](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250627000807847.png)

å¾—åˆ°çš„æ¨å¯¼ç»“æœ:
$$
R_\theta = 
\begin{bmatrix}
\cos\theta & -\sin\theta \\
\sin\theta & \cos\theta
\end{bmatrix}
$$
$$
\mathbf{x}' = \mathbf{M}\mathbf{x}
\quad \text{å…¶ä¸­} \quad
\mathbf{M} = \begin{bmatrix}
a & b \\
c & d
\end{bmatrix}
$$



> [!tip]
>
> ä»¥ä¸Šçš„å˜æ¢ç»Ÿç§°çº¿æ€§å˜æ¢ï¼Œçº¿æ€§å˜æ¢åœ¨çŸ©é˜µä¸­çš„å®šä¹‰æ˜¯å¯ä»¥é€šè¿‡ä¸€æ¬¡ä¹˜æ³•ç›´æ¥å¾—åˆ°ç»“æœçš„è¿ç®—

![image-20250627001505910](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250627001505910.png)

### å¹³ç§»å˜æ¢ï¼ˆTranslationï¼‰

![image-20250627001640000](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250627001640000.png)

è€Œå¹³ç§»å˜æ¢çœ‹ä¼¼ç®€å•ï¼Œå´æ— æ³•ç”¨çº¿æ€§å˜æ¢çŸ©é˜µæ¥è¡¨ç¤ºï¼Œå…¶æ•°å­¦è¡¨è¾¾å¦‚ä¸‹:
$$
\begin{cases}
x' = x + t_x \\
y' = y + t_y
\end{cases}
$$
å…¶å†™ä¸ºçŸ©é˜µè¡¨è¾¾å¦‚ä¸‹:
$$
\left[\begin{array}{l}
x^{\prime} \\
y^{\prime}
\end{array}\right]
=
\left[\begin{array}{ll}
a & b \\
c & d
\end{array}\right]
\left[\begin{array}{l}
x \\
y
\end{array}\right]
+
\left[\begin{array}{l}
t_{x} \\
t_{y}
\end{array}\right]
$$
äººç±»æ€»æ˜¯çŠ¯æ‡’çš„ï¼Œæœ€æƒ³åšçš„äº‹å°±æ˜¯ä¸€æ­¥åˆ°ä½è€Œä¸è¦è¿™ä¹ˆå¤šç¹ççš„æ“ä½œï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥é½æ¬¡åæ ‡çš„æ¦‚å¿µï¼ˆæ‰€è°“é½æ¬¡åæ ‡æš‚ä¸”å¯ä»¥å…ˆç†è§£ä¸ºåŠ äº†ä¸€ä¸ªåæ ‡è½´ï¼Œç”¨äºå°†å¹³ç§»å˜æ¢ç»Ÿä¸€åˆ°æˆ‘ä»¬çš„ä¸€èˆ¬å˜æ¢ä¸­ï¼‰ï¼Œé½æ¬¡åçš„çŸ©é˜µè¡¨è¾¾å¼å¦‚ä¸‹æ‰€ç¤º:
$$
\left(\begin{array}{c}
x^{\prime} \\
y^{\prime} \\
w^{\prime}
\end{array}\right)
=
\left(\begin{array}{ccc}
1 & 0 & t_{x} \\
0 & 1 & t_{y} \\
0 & 0 & 1
\end{array}\right)
\cdot
\left(\begin{array}{l}
x \\
y \\
1
\end{array}\right)
=
\left(\begin{array}{c}
x + t_{x} \\
y + t_{y} \\
1
\end{array}\right)
$$
è€Œä¹‹å‰çš„æ‰€æœ‰å˜æ¢æ“ä½œåœ¨é½æ¬¡åæ ‡ä¸‹ä»ç„¶å¯ç”¨:

**Scale**:
$$
\mathbf{S}(s_x, s_y) = 
\begin{pmatrix}
s_x & 0 & 0 \\
0 & s_y & 0 \\
0 & 0 & 1
\end{pmatrix}
$$
**Rotation**:
$$
\mathbf{R}(\alpha) = 
\begin{pmatrix}
\cos \alpha & -\sin \alpha & 0 \\
\sin \alpha & \cos \alpha & 0 \\
0 & 0 & 1
\end{pmatrix}
$$
**Translation**: 
$$
\mathbf{T}(t_x, t_y) = 
\begin{pmatrix}
1 & 0 & t_x \\
0 & 1 & t_y \\
0 & 0 & 1
\end{pmatrix}
$$

> [!caution]
>
> å½“å›¾åƒè¿›è¡Œå¤šä¸ªå˜æ¢æ—¶ï¼Œå…¶å¤åˆè¡¨è¾¾å¼åº”è¯¥ä»å³å¾€å·¦å†™ï¼Œå¹¶ä¸”ä¹˜æ³•äº¤æ¢ç‡åœ¨çŸ©é˜µä¸­å¹¶ä¸é€‚ç”¨

$$
\mathbf{M} = \mathbf{T}(t_x,t_y) \cdot \mathbf{R}(\alpha) \cdot \mathbf{S}(s_x,s_y)
$$

å¦‚ä¸Šå¼ï¼Œè¡¨ç¤ºçš„æ˜¯æŸå›¾åƒå…ˆç¼©æ”¾ï¼Œç„¶åæ—‹è½¬ï¼Œæœ€ååå†å¹³ç§»ã€‚

## 3Då˜æ¢

3Då˜æ¢ç›¸å¯¹äº2Då˜æ¢æ¥è¯´åªæ˜¯å¤šå¢åŠ äº†ä¸€ä¸ªç»´åº¦ï¼Œå¯ç”±2Då˜æ¢ä¸¾ä¸€åä¸‰å¾—æ¥ï¼š

**Scale**:
$$
\mathbf{S}(s_x, s_y, s_z) = 
\left(\begin{array}{cccc}
s_x & 0 & 0 & 0 \\
0 & s_y & 0 & 0 \\
0 & 0 & s_z & 0 \\
0 & 0 & 0 & 1
\end{array}\right)
$$
**Translation:**
$$
\mathbf{T}(t_x, t_y, t_z) = 
\left(\begin{array}{cccc}
1 & 0 & 0 & t_x \\
0 & 1 & 0 & t_y \\
0 & 0 & 1 & t_z \\
0 & 0 & 0 & 1
\end{array}\right)
$$

### 3Dæ—‹è½¬

3Dæ—‹è½¬ä¸2Dæ—‹è½¬ä¹ŸåŸºæœ¬ä¸€ç›´ï¼Œè§‚å¯Ÿå¦‚ä¸‹çŸ©é˜µè¡¨ç¤ºå¯ä»¥æ„Ÿå—å…¶å‡ ä½•æ„ä¹‰ï¼šç»•Xè½´æ—‹è½¬åˆ™xç›¸å…³åæ ‡æ— å˜åŒ–ï¼Œæ‰€ä»¥xé™¤å¯¹è§’çº¿å¤–çš„å…ƒç´ å‡ä¸º0ï¼Œå…¶ä½™ä¸¤ä¸ªè½´åŒç†.
$$
\begin{array}{c}
\mathbf{R}_{x}(\alpha)=\begin{pmatrix}
1 &0&0&0\\
0 &\cos\alpha &-\sin\alpha &0\\
0 &\sin\alpha &\cos\alpha &0\\
0 &0&0&1
\end{pmatrix}\\
\mathbf{R}_{y}(\alpha)=\begin{pmatrix}
\cos\alpha &0&\sin\alpha &0\\
0 &1&0&0\\
-\sin\alpha &0&\cos\alpha &0\\
0 &0&0&1
\end{pmatrix}\\
\mathbf{R}_{z}(\alpha)=\begin{pmatrix}
\cos\alpha &-\sin\alpha &0&0\\
\sin\alpha &\cos\alpha &0&0\\
0 &0&1&0\\
0 &0&0&1
\end{pmatrix}
\end{array}
$$
è€Œç»•yè½´æ—‹è½¬æœ‰ä¸€ç‚¹ç‰¹æ®Šï¼Œä»–åœ¨æ—‹è½¬ä¹‹å¤–è¿›è¡Œäº†ä¸€ä¸ªè½¬ç½®ï¼Œè¿™æ ·åšçš„åŸå› æ˜¯æºäºå‘é‡çš„å‰ä¹˜ï¼š

$$
\begin{aligned}
\mathbf{X} \times \mathbf{Y} &= \mathbf{Z} \\
\mathbf{Y} \times \mathbf{Z} &= \mathbf{X} \\
\mathbf{X} \times \mathbf{Z} &= -\mathbf{Y}
\end{aligned}
$$

### **ç½—å¾·é‡Œæ ¼æ–¯æ—‹è½¬å…¬å¼**

## è§‚æµ‹å˜æ¢ï¼ˆViewing transformationï¼‰

### è§†å›¾/ç›¸æœºå˜æ¢ï¼ˆView/Camera transformationï¼‰

å›¾å½¢å­¦çš„æœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†å°†ä¸‰ç»´ä¸­çš„ç‰©ä½“æ¸²æŸ“æˆäºŒç»´é‡Œçš„å›¾åƒï¼Œåœ¨ç°å®ç”Ÿæ´»ä¸­å¦‚ä½•ç…§ä¸€å¼ ç…§ç‰‡ï¼Ÿ

- æ‰¾ä¸ªå¥½åœ°æ–¹æ‘†poseï¼ˆModelå˜æ¢ï¼‰

- æŠŠç›¸æœºæ”¾ä¸ªå¥½è§’åº¦ï¼ˆViewå˜æ¢ï¼‰

- æŒ‰å¿«é—¨ï¼ˆæŠ•å½±Projectionå˜æ¢ï¼‰

ç®€ç§°MVPğŸ¤­

è§†å›¾Viewå˜æ¢--å¦‚ä½•æ‘†æ”¾ç›¸æœºçš„è§’åº¦

- å†³å®šç›¸æœºçš„ä½ç½®

- å†³å®šç›¸æœºçœ‹å‘çš„æ–¹å‘

- å†³å®šç›¸æœºå¤´æœä¸Šçš„æ–¹å‘

è€ƒè™‘åˆ°æˆ‘ä»¬è¦å®ç°ä¸‹é¢ä¸€ç§æƒ…å†µï¼šä¸€ä¸ªæ— é™å¤§çš„åœºæ™¯ä¸­ï¼Œç›¸æœºå’Œè¦æ‹æ‘„çš„ç‰©ä½“éšæ„ç§»åŠ¨ï¼Œåªè¦ç›¸æœºå¯¹äºæŸç‰©ä½“çš„ç›¸å¯¹å˜æ¢ï¼ˆä½ç½®ã€æœå‘ã€ç¼©æ”¾ï¼‰ç›¸åŒï¼Œé‚£ä¹ˆåœ¨ç›¸æœºæ‹æ‘„å‡ºçš„ç”»é¢ä¸­ï¼Œè¯¥ç‰©ä½“æ°¸è¿œç›¸åŒï¼ˆä¸è€ƒè™‘å…‰ç…§ï¼‰ã€‚

![image-20250627180437412](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250627180437412.png)

ä¸ºäº†ç®€åŒ–è®¡ç®—ï¼Œä¸€èˆ¬å°†ç›¸æœºçš„ä½ç½®æ°¸è¿œè§„å®šåœ¨ï¼ˆ0ï¼Œ0ï¼Œ0ï¼‰ï¼Œå¹¶ä¸”å…¶æœå‘æ°¸è¿œå’Œ-Zè½´ç›¸åŒï¼Œè§†ä¸ºä¸€ä¸ªè®¡ç®—æœºå›¾å½¢å­¦ä¸­çš„çº¦å®šã€‚

![image-20250627181859652](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250627181859652.png)

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè¦æŠŠæ‘„åƒæœºå½’åˆ°åŸç‚¹åˆ†ä¸‰æ­¥

- å¹³ç§»æ‘„åƒæœºè‡³ï¼ˆ0ï¼Œ0ï¼Œ0ï¼‰å¯¹åŸæœ¬çš„åæ ‡ç‚¹åšå¹³ç§»å˜æ¢

$$
T_{\text{view}} = 
\begin{bmatrix}
1 & 0 & 0 & -x_{e} \\
0 & 1 & 0 & -y_{e} \\
0 & 0 & 1 & -z_{e} \\
0 & 0 & 0 & 1
\end{bmatrix}
$$

- å°†ç›¸æœºlookatçš„æ–¹å‘æ—‹è½¬åˆ°-Zï¼Œæ—‹è½¬ç›¸æœºå¤´æœä¸Šçš„æ–¹å‘åˆ°Y
  $$
  R_{\text{view}} = 
  \begin{bmatrix}
  x_{\hat{g} \times \hat{t}} & y_{\hat{g} \times \hat{t}} & z_{\hat{g} \times \hat{t}} & 0 \\
  x_{\hat{t}} & y_{\hat{t}} & z_{\hat{t}} & 0 \\
  x_{-\hat{g}} & y_{-\hat{g}} & z_{-\hat{g}} & 0 \\
  0 & 0 & 0 & 1
  \end{bmatrix}
  $$

å¾—åˆ°å˜æ¢çŸ©é˜µ
$$
M_{\text{view}} = R_{\text{view}} \cdot T_{\text{view}} = 
\begin{bmatrix}
x_{\hat{g} \times \hat{t}} & y_{\hat{g} \times \hat{t}} & z_{\hat{g} \times \hat{t}} & -\vec{e} \cdot (\hat{g} \times \hat{t}) \\
x_{\hat{t}} & y_{\hat{t}} & z_{\hat{t}} & -\vec{e} \cdot \hat{t} \\
x_{-\hat{g}} & y_{-\hat{g}} & z_{-\hat{g}} & \vec{e} \cdot \hat{g} \\
0 & 0 & 0 & 1
\end{bmatrix}
$$
$$
\text{ï¼ˆå…¶ä¸­ } \vec{e} = (x_e, y_e, z_e) \text{ æ˜¯ç›¸æœºä½ç½®ï¼‰}
$$

å°†Mviewåº”ç”¨åˆ°ç›¸æœºï¼Œç›¸æœºå½’é›¶ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å°†Mviewåº”ç”¨åˆ°å…¶ä»–æ‰€æœ‰ç‰©ä½“ï¼Œè®©ç‰©ä½“å’Œç›¸æœºçš„ç›¸å¯¹ä½ç½®ä¿æŒä¸å˜

## æŠ•å½±å˜æ¢

![image-20250627183609000](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250627183609000.png)

![image-20250627183629247](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250627183629247.png)

æŠ•å½±å˜æ¢åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯æ­£äº¤æŠ•å½±ï¼Œä¸€ç§æ˜¯é€è§†æŠ•å½±ã€‚å…¶æœ€æ ¸å¿ƒçš„åŒºåˆ«åœ¨äºï¼šé€è§†æŠ•å½±ä¼šé€ æˆä¸€ä¸ªâ€œè¿‘å¤§è¿œå°â€çš„ç°è±¡ï¼Œç”¨ä¸€ä¸ªæ¢—æ¥è§£é‡Šå°±æ˜¯â€œé“ç†æˆ‘éƒ½æ‡‚ï¼Œä½†æ˜¯é¸½å­ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤§â€ğŸ™‚

![â€œé“ç†æˆ‘éƒ½æ‡‚ï¼Œä½†æ˜¯è¿™ä¸ªé¸½å­æ€ä¹ˆè¿™ä¹ˆå¤§ï¼Ÿâ€|é¸½å­|é“ç†_æ–°æµªæ–°é—»](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/c57f-hxhyiun5536644.jpg)

> [!Note]
>
> åœ¨ç°ä»£æ¸¸æˆå¼€å‘ä¸­ï¼Œå¾ˆå¤š2Dæ¸¸æˆæ˜¯ä½¿ç”¨3Då¼•æ“å»åšçš„å¼€å‘ï¼Œç„¶è€Œå…¶è§†å›¾ä»ç„¶èƒ½ä¿æŒ2Dçš„æ„Ÿè§‰ï¼Œä½¿ç”¨çš„æŠ•å½±æ–¹å¼å°±æ­£äº¤æŠ•å½±ã€‚

### æ­£äº¤æŠ•å½±



![image-20250627185154209](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250627185154209.png)

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å»¶ç»­ä¹‹å‰ç›¸æœºåæ ‡å½’äºåŸç‚¹çš„æ€æƒ³ï¼Œå¯ä»¥å¾—åˆ°ä¸‹é¢çš„æ€ç»´é“¾æ¡ï¼š

- å…ˆå°†ç›¸æœºå½’é›¶ï¼Œå¹¶lookat -Zè½´

- ç›´æ¥æŠŠZè½´åæ ‡èˆå¼ƒï¼Œå°±èƒ½å¾—åˆ°ç‰©ä½“åœ¨xyå¹³é¢ä¸Šçš„æŠ•å½±

- æŠŠå¾—åˆ°çš„å›¾åƒå¹³ç§»å¹¶ä¸”ç¼©æ”¾åˆ°[-1,1]Â²ä¸­ï¼Œæ–¹ä¾¿ä¹‹åçš„è®¡ç®—

ä½†åœ¨è®¡ç®—æœºå›¾å½¢å­¦çš„å®é™…è¿‡ç¨‹ä¸­ï¼Œæœ‰ç€æ›´ç®€åŒ–çš„è®¡ç®—æ–¹å¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º

![image-20250627185415063](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250627185415063.png)

è§†å£æ˜¯ä¸ªï¼ˆl,rï¼‰ï¼ˆb,tï¼‰ï¼ˆf,nï¼‰çš„é•¿æ–¹ä½“,æƒ³è®©ä»–å˜æˆ[-1,1]Â³ä¸­åªéœ€è¦

- å…ˆå°†ç«‹æ–¹ä½“çš„ä¸­å¿ƒå¹³ç§»åˆ°åŸç‚¹
- åœ¨å°†ç«‹æ–¹ä½“ç¼©æ”¾åˆ°[-1,1]Â³ä¸­

$$
M_{\text{ortho}} = 
\begin{bmatrix}
\frac{2}{r-l} & 0 & 0 & 0 \\
0 & \frac{2}{t-b} & 0 & 0 \\
0 & 0 & \frac{2}{n-f} & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}
\cdot
\begin{bmatrix}
1 & 0 & 0 & -\frac{r+l}{2} \\
0 & 1 & 0 & -\frac{t+b}{2} \\
0 & 0 & 1 & -\frac{n+f}{2} \\
0 & 0 & 0 & 1
\end{bmatrix}
$$

### é€è§†æŠ•å½±

é€è§†æŠ•å½±æ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„æŠ•å½±æ–¹æ³•

ä¼ ç»Ÿçš„æ¬§å¼å‡ ä½•æ˜¯åœ¨åŒä¸€å¹³é¢å†…ç”Ÿæ•ˆçš„æ³•åˆ™ï¼Œå¯¹äºä¸åŒå¹³é¢å°±ä¼šé€ æˆç…§ç‰‡ä¸­è¿‘å¤§è¿œå°çš„æƒ…å†µ

![image-20250627190007409](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250627190007409.png)

å¯¹äºä¸€ä¸ªä½¿ç”¨é€è§†æŠ•å½±çš„ç»˜åˆ¶ï¼Œåº”è¯¥æ€æ ·è¿›è¡Œå‘¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![image-20250627222505168](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250627222505168.png)

è€å¸ˆçš„æ–¹æ³•æ˜¯ï¼Œå…ˆå°†Frustumè¿œå¹³é¢åŠè¿œå¹³é¢åˆ°è¿‘å¹³é¢ä¹‹é—´çš„æ‰€æœ‰å¹³é¢æŒ¤å‹åˆ°è¿‘å¹³é¢å¤§å°ï¼Œ

å˜æˆCuboidçš„æ ·å­ï¼Œç„¶ååšä¸€æ¬¡æ­£äº¤æŠ•å½±ã€‚

æ€æ ·åšæŒ¤å‹ï¼Ÿ

- å¯¹äºé™¤è¿‘å¹³é¢å¤–çš„ä»»æ„ä¸€ä¸ªç‚¹ï¼Œé€šè¿‡æŒ¤å‹åè¯¥ç‚¹çš„é«˜åº¦yè¦å˜æˆå’Œè¿‘å¹³é¢ä¸€æ ·çš„yâ€™
- ä»ä¾§é¢çœ‹Frustumçš„è¯ï¼Œå¦‚ä¸‹å›¾ï¼Œå¯ä»¥å½¢æˆä¸¤ä¸ªç›¸ä¼¼ä¸‰è§’å½¢ï¼Œå³å¯å¾—å‡ºyâ€˜=(n/z)y
- åŒç†x'=(n/z)x

![image-20250627222713496](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250627222713496.png)

å¯ä»¥å¾—åˆ°ä»¥ä¸‹æ•°å­¦è¡¨è¾¾:
$$
\begin{aligned}
x' &= \frac{n}{z} x \\
y' &= \frac{n}{z} y \quad \text{(similar to } x')
\end{aligned}
$$
å°†å…¶è¡¨ç¤ºä¸ºé½æ¬¡åæ ‡çš„å½¢å¼:
$$
\begin{pmatrix}
x \\ y \\ z \\ 1
\end{pmatrix}
\Rightarrow
\begin{pmatrix}
nx/z \\ ny/z \\ \text{unknown} \\ 1
\end{pmatrix}
\xrightarrow{\text{mult. }z}
\begin{pmatrix}
nx \\ ny \\ \text{still unknown} \\ z
\end{pmatrix}
$$
ç°åœ¨æˆ‘ä»¬å¯¹äºæŠ•å½±çš„å˜æ¢ï¼ˆæŒ¤å‹éƒ¨åˆ†ï¼‰æœ‰å¦‚ä¸‹è¡¨è¾¾:
$$
M_{\text{persp}\rightarrow\text{ortho}}^{(4\times4)}
\begin{pmatrix}
x \\ y \\ z \\ 1
\end{pmatrix}
=
\begin{pmatrix}
nx \\ ny \\ \text{unknown} \\ z
\end{pmatrix}
$$
æ˜¾è€Œæ˜“è§å¯ä»¥æ¨ç†å‡ºMçš„éƒ¨åˆ†å€¼
$$
M_{\text{persp}\rightarrow\text{ortho}} = 
\begin{pmatrix}
n & 0 & 0 & 0 \\
0 & n & 0 & 0 \\
? & ? & ? & ? \\
0 & 0 & 1 & 0
\end{pmatrix}
$$
![image-20250628012456253](ã€Games101ã€‘å˜æ¢åŸºç¡€æ¦‚å¿µ/image-20250628012456253.png)

æƒ³è¡¥å…¨è¿™ä¸ªçŸ©é˜µï¼Œéœ€è¦ç”¨åˆ°ä¸¤æ¡å·²çŸ¥çš„æ€§è´¨

1. è¿‘å¹³é¢çš„ç‚¹åæ ‡ï¼ˆx,y,zï¼‰éƒ½ä¸ä¼šå‘ç”Ÿå˜åŒ–
2. è¿œå¹³é¢çš„ç‚¹zçš„å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼ˆå› ä¸ºæˆ‘ä»¬é‡‡ç”¨çš„æ–¹æ³•æ˜¯å…ˆå‹ç¼©åæ­£äº¤ï¼‰

ä»£å…¥ç¬¬ä¸€æ¡æ€§è´¨ï¼ˆzå€¼ä»£ä¸ºnï¼‰
$$
\begin{pmatrix}
x \\
y \\
n \\
1
\end{pmatrix}
\Rightarrow
\begin{pmatrix}
x \\
y \\
n \\
1
\end{pmatrix}
=
\begin{pmatrix}
n x \\
n y \\
n^{2} \\
n
\end{pmatrix}
$$
æ˜¾ç„¶å‘ç°ç¬¬ä¸‰è¡Œçš„è®¡ç®—ç»“æœnæ–¹ä¸x,yå‡æ— å…³ç³»ï¼Œæ•…è®¾ç¬¬ä¸‰è¡Œä¸º (0,0,*A*,*B*)ï¼Œåˆ™å…¶æ»¡è¶³
$$
\begin{pmatrix}
0 & 0 & A & B
\end{pmatrix}
\begin{pmatrix}
x \\
y \\
n \\
1
\end{pmatrix}
= n^2
$$
å°†å…¶å±•å¼€æ¨å¯¼:
$$
An + B = n^{2}
$$
æ˜¾ç„¶è¯¥å¼æœ‰æ— ç©·å¤šè§£ï¼Œç°åœ¨ç»“åˆä¸Šé¢ç¬¬äºŒæ¡æ€§è´¨çš„ç‰¹æ®Šç‚¹--å³è¿œå¹³é¢ä¸Šçš„ä¸­å¿ƒç‚¹å‹ç¼©åä»ç„¶æ˜¯åŸæ¥çš„ä½ç½®ï¼Œæˆ‘ä»¬è®¾å…¶åæ ‡ä¸ºï¼ˆ0ï¼Œ0ï¼Œfï¼‰ï¼Œå¸¦å…¥æ•°å­¦è¡¨è¾¾å¼ï¼Œå¹¶å†™ä¸ºç»Ÿä¸€æ ¼å¼ã€‚
$$
\begin{pmatrix}
0 \\
0 \\
f \\
1
\end{pmatrix}
\Rightarrow
\begin{pmatrix}
0 \\
0 \\
f \\
1
\end{pmatrix}
=
\begin{pmatrix}
0 \\
0 \\
f^2 \\
f
\end{pmatrix}
$$
å±•å¼€å¾—åˆ°:
$$
Af + B = f^{2}
$$
è”ç«‹ä¸¤å¼è§£å¾—:
$$
\begin{cases}
An + B = n^{2} \\
Af + B = f^{2}
\end{cases}
\quad \longrightarrow \quad
\begin{cases}
A = n + f \\
B = -nf
\end{cases}
$$
è‡³æ­¤è§£å¾—äº†å®Œæ•´çš„å‹ç¼©å˜æ¢çŸ©é˜µï¼š
$$
M_{\text{persp}\rightarrow\text{ortho}} = 
\begin{pmatrix}
n & 0 & 0 & 0 \\
0 & n & 0 & 0 \\
0 & 0 & n+f & -nf \\
0 & 0 & 1 & 0
\end{pmatrix}
$$
å¯¹å‹ç¼©ç»“æœå†è¿›è¡Œä¸€æ­¥æ­£äº¤æŠ•å½±å³å¯å¾—åˆ°æœ€ç»ˆç»“æœ
$$
M_{\text{persp}} = M_{\text{ortho}} \cdot M_{\text{persp}\rightarrow\text{ortho}}
$$